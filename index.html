<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω–∏</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        margin: 0;
        background: #0a1a33;
        font-family: Arial, sans-serif;
        overflow: hidden;
    }

    h1 {
        text-align: center;
        color: #fff;
        margin-top: 20px;
    }

    #wheelCanvas {
        display: block;
        margin: 0 auto;
        background: #0a1a33;
        transition: transform 2s ease;
    }

    #panel {
        width: 90%;
        max-width: 600px;
        margin: 20px auto;
        background: #0f2850;
        padding: 15px;
        border-radius: 10px;
        color: #fff;
    }

    textarea {
        width: 100%;
        height: 120px;
        background: #123064;
        color: #fff;
        border: none;
        padding: 10px;
        border-radius: 8px;
        resize: none;
        font-size: 15px;
    }

    button {
        width: 100%;
        margin-top: 10px;
        padding: 12px;
        border: none;
        border-radius: 8px;
        background: #1f4fa8;
        color: white;
        font-size: 16px;
        transition: 0.2s;
    }

    button:hover { background: #2d6acc; }

    .snowflake {
        position: fixed;
        top: -10px;
        color: #ffffff80;
        pointer-events: none;
        font-size: 10px;
        animation: fall linear infinite;
    }

    @keyframes fall {
        0% { transform: translateY(-10px); }
        100% { transform: translateY(110vh); }
    }
</style>
</head>
<body>

<h1>–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω–∏</h1>

<canvas id="wheelCanvas" width="350" height="350"></canvas>

<div id="panel">
    <textarea id="inputArea"></textarea>
    <button id="spinBtn">–ö—Ä—É—Ç–∏—Ç–∏ –∫–æ–ª–µ—Å–æ</button>
</div>

<script>
// —Å–ø–∏—Å–æ–∫
let defaultNames = [
"–ê—Ä—Ç—å–æ–º–æ–≤–∞ –í—ñ–∫—Ç–æ—Ä—ñ—è –ü–∞–≤–ª—ñ–≤–Ω–∞",
"–ê—Ç–∞–º–∞–Ω—ñ–≤ –Æ—Ä—ñ–π –†—É—Å–ª–∞–Ω–æ–≤–∏—á",
"–ë–µ–π –ú–∞—Ç–≤—ñ–π –°–µ—Ä–≥—ñ–π–æ–≤–∏—á",
"–ë–∏—á–∫–æ–≤ –Ü–ª–ª—è –û–ª–µ–∫—Å—ñ–π–æ–≤–∏—á",
"–î–µ–º–∫—ñ–≤ –ë–æ–≥–¥–∞–Ω –ü–∞–≤–ª–æ–≤–∏—á",
"–î—ñ–¥–∏–∫ –°–≤—è—Ç–æ—Å–ª–∞–≤ –î–º–∏—Ç—Ä–æ–≤–∏—á",
"–î–ª—É–≥–æ—à –ï–≤–µ–ª—ñ–Ω–∞ –Æ—Ä—ñ—ó–≤–Ω–∞",
"–î—É–¥–∫–æ –î—ñ–∞–Ω–∞ –í–∞–ª–µ–Ω—Ç–∏–Ω—ñ–≤–Ω–∞",
"–Ñ–≤–¥–æ–∫—ñ–º–æ–≤ –ó–∞—Ö–∞—Ä –û–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á",
"–ô–æ–¥–∞ –ê–≥–Ω—ñ—è –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤–Ω–∞",
"–ú–∞–≤–¥—Ä–∏–∫ –í—ñ–∫—Ç–æ—Ä –ê–Ω–¥—Ä—ñ–π–æ–≤–∏—á",
"–û—Å—Ç–∞–ø—á—É–∫ –í–µ—Ä–æ–Ω—ñ–∫–∞ –Ü–≤–∞–Ω—ñ–≤–Ω–∞",
"–ü–æ—Ü—ñ–ª—É–π–∫–æ –í—ñ–∫—Ç–æ—Ä—ñ—è –í–æ–ª–æ–¥–∏–º–∏—Ä—ñ–≤–Ω–∞",
"–ü—É—á–∫–æ–≤—Å—å–∫–∞ –õ—ñ–Ω–∞",
"–°—Ç—Ä—É–∫–æ–≤ –Æ—Ä—ñ–π –û–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á",
"–°—É—Ö–æ—Ä—É—á–µ–Ω–∫–æ–≤ –ú–∏—Ö–∞–π–ª–æ –°–µ—Ä–≥—ñ–π–æ–≤–∏—á",
"–¢–∞—Ä–∞—Å—é–∫ –î–∞—Ä'—è –í–∞–¥–∏–º—ñ–≤–Ω–∞",
"–¢—Ä–æ—Ü–µ–Ω–∫–æ –Ü–ª–ª—è –û–ª–µ–∫—Å—ñ–π–æ–≤–∏—á",
"–£—Å—Ç–µ–Ω–∫–æ –ú–∞—Ä—ñ—è –ì—Ä–∏–≥–æ—Ä—ñ–≤–Ω–∞"
];

function shortName(full) {
    let p = full.split(" ");
    if (p.length < 2) return full;
    return `${p[1]} ${p[0].slice(0,2)}`;
}

document.getElementById("inputArea").value =
    defaultNames.map(shortName).join(",\n");

// –∫–æ–ª—å–æ—Ä–∏
let colors = [
"#174082","#2d6acc","#4e8bed",
"#204f0a","#409419","#61b03c",
"#4d2e07","#a38015","#d4a824",
"#4d1c0a","#823417","#b04a25"
];

let entries = [];
let lastText = "";

let canvas = document.getElementById("wheelCanvas");
let ctx = canvas.getContext("2d");

let angle = 0;
let spinning = false;

// –∑–≤—É–∫
let clickSound = new Audio();
clickSound.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQcAAAAA/////w==";

// –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
function updateEntries() {
    let txt = document.getElementById("inputArea").value.trim();
    if (txt === lastText) return;

    entries = txt.split(",")
        .map(e => e.trim())
        .filter(e => e.length > 0);

    lastText = txt;
    drawWheel();
}
setInterval(updateEntries, 1000);

// –ø—Ä–æ–º–∞–ª—å–æ–≤–∫–∞
function drawWheel() {
    let count = entries.length;
    ctx.clearRect(0,0,350,350);
    if (count === 0) return;

    let step = 2 * Math.PI / count;

    for (let i = 0; i < count; i++) {
        ctx.beginPath();
        ctx.moveTo(175,175);
        ctx.fillStyle = colors[i % colors.length];
        ctx.arc(175,175,170, step*i+angle, step*(i+1)+angle);
        ctx.fill();

        ctx.save();
        ctx.translate(175,175);
        ctx.rotate(step*(i+0.5)+angle);
        ctx.fillStyle = "white";
        ctx.font = "15px Arial";
        ctx.textAlign = "right";
        ctx.fillText(entries[i], 160, 5);
        ctx.restore();
    }

    ctx.fillStyle = "white";
    ctx.beginPath();
    ctx.moveTo(175, 10);
    ctx.lineTo(165, 40);
    ctx.lineTo(185, 40);
    ctx.fill();
}

function playClick() {
    clickSound.currentTime = 0;
    clickSound.play();
}

// –∑–∞–ø—É—Å–∫
document.getElementById("spinBtn").onclick = () => {
    if (spinning || entries.length === 0) return;
    spinning = true;

    let startAngle = angle;

    // üî• –ü–û–í–ù–ò–ô –†–ê–ù–î–û–ú:
    let randomFullRotations = Math.floor(Math.random() * 12) + 8; // 8‚Äì20 –æ–±–µ—Ä—Ç—ñ–≤
    let randomOffset = Math.random() * Math.PI * 2; // –≤–∏–ø–∞–¥–∫–æ–≤–∞ –∑—É–ø–∏–Ω–∫–∞
    let endAngle = angle + randomFullRotations * Math.PI * 2 + randomOffset;

    let startTime = performance.now();

    function animate(now) {
        let t = (now - startTime) / 8000;

        if (t >= 1) {
            angle = endAngle;
            drawWheel();
            spinning = false;
            zoomToPointer();
            return;
        }

        angle = startAngle + (endAngle - startAngle) * easeOutCubic(t);

        playClick();
        drawWheel();
        requestAnimationFrame(animate);
    }

    requestAnimationFrame(animate);
};

// —É–ø–æ–≤—ñ–ª—å–Ω–µ–Ω–Ω—è
function easeOutCubic(x) {
    return 1 - Math.pow(1 - x, 3);
}

// –∫–∞–º–µ—Ä–∞
function zoomToPointer() {
    canvas.style.transform = "scale(1.6) translateY(40px)";
    setTimeout(() => canvas.style.transform = "scale(1)", 5000);
}

// —Å–Ω—ñ–≥
function createSnowflake() {
    let s = document.createElement("div");
    s.className = "snowflake";
    s.innerText = "‚ùÑ";
    s.style.left = Math.random()*100 + "vw";
    s.style.fontSize = (Math.random()*10 + 10) + "px";
    s.style.animationDuration = (Math.random()*5 + 5) + "s";
    document.body.appendChild(s);
    setTimeout(() => s.remove(), 10000);
}
setInterval(createSnowflake, 150);

drawWheel();
</script>

</body>
</html>
